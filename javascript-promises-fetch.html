<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="scripts/script.js" defer></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Help</title>
</head>
<body>
<nav class="navbar fixed-top navbar-dark bg-dark navbar-expand-lg navbar-custom">
    <button class="navbar-toggler m-auto" type="button" data-toggle="collapse" data-target="#navbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbar">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">Javascript</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="index.html">Javascript</a>
                    <a class="dropdown-item" href="javascript-promises-fetch.html">Promises / Fetch</a>
                    <a class="dropdown-item" href="typescript.html">Typescript</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">Node.js</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="nodejs.html">Node.js</a>
                    <a class="dropdown-item" href="express.html">Express</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="react.html">React</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">CSS</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="sass.html">Sass</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">PHP</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="php.html">PHP</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ajax.html">AJAX</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="git.html">Git</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">More</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="internet.html">Internet</a>
                </div>
            </li>
        </ul>
    </div>
</nav>


<div class="wrapper">
    <h1 class="title">Promises / Fetch API</h1>
    <div class="search">
        <input type="text">
    </div>

<!------------------- Promises ------------------>
<div class="code-part"><h3 class="code-title">Promises</h3>
<p>Make a promise object</p>
<pre class="code">
let p = new Promise((resolve, reject) => {
    let a = 1 + 1;
    if(a === 2) {
        resolve('Succes'); 
    } else if (a === 3) {
        reject('Failed');
    } else {
        reject('Failed');
    }
});
</pre>
<p>get promise value</p>
<pre class="code">
p.then((message) => {
    console.log('then: : ' + message);
}).catch((message) => {
    console.log('cath: ' + message);
});
</pre>
<hr class="line">
<pre class="code">
function tippszmix(tipp) {

    let resultArray = ["1", "X", "2"];
    let result = resultArray[Math.floor(Math.random() * (max - min + 1) + min)];

    return new Promise((resolve, reject) => {

        if(tipp == result) {
            resolve({
                profit: '+',
                message: 'WIN'
            });
        } else {
            reject({
                profit:'-',
                message: 'LOSE'
            })
        }
    })

}

const tipp = "X";
tippszmix(tipp).then((msg) => {
    console.log(msg.profit + '  ' + msg.message);
}).catch((err) => {
    console.log(err.profit + '  ' + err.message)
})
</pre>
<hr class="line">
<pre class="code">
function getPost(id) {
    return new Promise((resolve, reject) => {
        let error = isPost(id);
        if (error) {
            reject('error it is');
        } else {
            let post = getPostData(id);
            resolve(post);
        }
    });
}

getPost(id).then((data) => {
    writeHTML(data);
}).catch(err => console.log('error'));
</pre>
</div>

<!------------------- Fetch API ------------------>
<div class="code-part"><h3 class="code-title">Fetch API</h3>
<p>fetch returns a promise (data in text format)</p>
<pre class="code">
const promise = fetch('randomtext.txt')
    .then(response => response.text())
    .then(data => console.log(data))
</pre>


<p>fetch returns a promise (data in json format)</p>
<pre class="code">
const promise = fetch('https://getrandomdata.com')
    .then(response => response.json())
    .then(data => console.log(data))
</pre>
</div>

<!------------------- Json, fetch ------------------>
<div class="code-part"><h3 class="code-title">JSON & Fetch</h3>
<p>data in <b>JSON</b> format</p>
<pre class="code">
[
    {"id" : 1, "name" : "Zsolt"},
    {"id" : 2, "name" : "Szabolcs"},
    {"id" : 3, "name" : "Péter"},
    {"id" : 4, "name" : "András"},
    {"id" : 5, "name" : "Lajos"},
    {"id" : 6, "name" : "Béla"}
]
</pre>
<p>get data</p>
<pre class="code">
function getNames() {
    fetch('https://getdata.com/names')
    .then(res => res.json())
    .then (data => {
        data.forEach(name => {
            // all data here
            console.log(name.id);
            console.log(name.name);
        });
    })
}
</pre>
<p>send data</p>
<pre class="code">
let name = {
    id: 7,
    name: 'Pista'
}

function addName(name) {

    fetch('https://getdata.com/names', {
        method: 'POST',
        headers: {
            'Content-type' : 'application/json'
        },
        body: JSON.stringify(name)
    })
    .then(res => res.json())
    .then (data => {
        console.log(data)
    })
}

addName(name);
</pre>
</div>

<!------------------- Async await ------------------>
<div class="code-part"><h3 class="code-title">Async await</h3>
<pre class="code">
async function getNames() {
    const res = await fetch('https://getdata.com/names');
    const data = await res.json();
    console.log(data);
}
getNames().catch(err => console.log(err));
</pre>
</div>

<div class="code-part"><h3 class="code-title">Videos</h3>
    <hr class="line">
    <div class="video">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/PoRJizFvM7s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <div class="video">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/DHvZLI7Db8E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <div class="video">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/RvYYCGs45L4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    <div class="video">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/Kpn2ajSa92c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</div>

</div>
</body>
</html>